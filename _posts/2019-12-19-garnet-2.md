---
layout: post
title: Let's build a home server (part 2)
description: Part 2 of the series Garnet - building a home server&#58; Debian-base
category: Garnet
---

### Introduction

You know what they say, the first step is always the hardest one.
So let's start with something really really simple to test the water.

In fact I want the process of creating this VM would be the basic template for the following VMs.

### Debian-base

I'm creating Debian-base to be a bare system, or a template to create other VMs.
The choice of OS here is Debian Buster running headless.

#### Bare system

In VirtualBox, create a new VM with type Linux - Debian (64-bit), with 256MB RAM and 30GB hard disk.
Most of the default settings are fine, except some small changes:
- Storage: Add Debian netinstall ISO file to Controller IDE section
- Network: Add 1 interface with bridged adapter through wlp2s0
- Optional: Turn off audio, change pointing device to PS/2 Mouse and turn off USB controller

Turn on the VM and install Debian.
Again, most settings can be kept default.
Don't forget to choose a strong password because for now the webserver is exposed to the local subnet.

In addition, I choose to install only system standard utilities and SSH server so I could manage the machine from my main laptop.

After finishing the installation, detach the live ISO and change the setting in System so the VM only boot from Hard Disk.
Login as root, update the server with 
```
apt-get update && apt-get upgrade
```
to keep the system up-to-date after a fresh installation.

Also install sudo with
```
apt-get install sudo
```
as well as run `visudo` and add a line allowing user to run sudo
```
user  ALL=(ALL) /bin/bash
```
**Note**: user "user" here is essentially root equivalent, not a regular user,  be careful with the account.

From this point I have finished installing a base template for a Debian machine.

**Note**: Take snapshot often so you can revert anytime you want.

#### Cloning

From this base, disable all the network interfaces.
Then use this Debian-base to full clone and create other VMs, with different name and MAC addresses.
When a cloned VM is used, its hostname can be changed by editting `/etc/hostname` and `/etc/hosts` (and change root password as well).

